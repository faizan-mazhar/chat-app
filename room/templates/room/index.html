{% extends "base.html" %}

{% block content %}
<div class="ms-2 me-2">
    <form method="POST">
        {% csrf_token %}
        <p>Create a new chat room?</p>
        {% for field in form %}
        <div class="form-outline mb-4">
            <label class="form-label" for="loginName">Room Name</label>
            {{ field }}
        </div>
        {% endfor %}
        <button type="submit" class="btn btn-primary btn-block mb-4">Create</button>
    </form>

    <p>What chat room would you like to enter?</p>
    <div class="list-group">
        {% for room in rooms %}
            <a href="{% url 'chat_room' room=room.name%}" class="list-group-item list-group-item-action">
                {{room.name}}
            </a>
        {% endfor %}
      </div>
</div>
<script>
    document.querySelector('#room-name-input').focus();
    document.querySelector('#room-name-input').onkeyup = function(e) {
        if (e.keyCode === 13) {  // enter, return
            document.querySelector('#room-name-submit').click();
        }
    };

    document.querySelector('#room-name-submit').onclick = function(e) {
        var roomName = document.querySelector('#room-name-input').value;
        window.location.pathname = '/room/' + roomName;
    };
</script>
{% endblock %}

